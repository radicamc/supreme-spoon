# ========================= BEGIN DMS CONFIG FILE =============================
#
# This is the configuration file for run_DMS.py.
#
# ===== Key Parameters =====
# Path to CRDS cache.
crds_cache_path : './crds_cache/'
# Input data file directory.
input_dir : 'DMS_uncal/'
# Input file tag.
input_filetag : 'uncal'

# ===== Stage 1 Input Files & Parameters =====
# Background model.
background_file : 'model_background256.npy'
# For 1/f correction; outlier pixel maps (optional).
outlier_maps : None
# For 1/f correction; estimate of white light curve (optional).
smoothed_wlc : None
# For jump detection; sigma threshold for a pixel to be flagged as an outlier.
rejection_threshold : 15
# For jump detection; whether to also flag outliers in the time domain.
flag_in_time : False
# For time domain jump detection; sigma threshold for a pixel to be flagged as an outlier.
time_rejection_threshold : 10
# List of Stage 1 steps to skip, if any.
stage1_skip : None
# DMS Stage 1 kwargs. Format should be: {'step_name': {'kwd': value}}.
stage1_kwargs : {}

# ===== Stage 2 Input Files & Parameters =====
# If True, create a mask of the target trace orders.
generate_tracemask : True
# Size of box to mask around the trace - should be wider than extraction box.
# Only necessary if generate_tracemask is True.
mask_width : 45
# If True, calculate the stability of the SOSS trace over the course of the
# TSO using a CCF analysis.
calculate_stability_ccf : False
# Parameters for which to calcuate the stability: 'x', 'y', 'FWHM, or 'ALL'. Only
# necessary if calculate_stability_ccf is True.
stability_params_ccf : 'ALL'
# Number of CPUs for CCF stability parameter calculation multiprocessing.
nthreads : 4
# If True, calculate the stability of the SOSS trace over the course of the
# TSO using a principle component analysis.
calculate_stability_pca : True
# Number of principle components to extract. Only neceesary if calculate_stability_pca
# is True.
pca_components : 10
# If True, generate a smoothed estimate of the order 1 white light curve.
generate_lc : True
# Timescale on which to smooth lightcurve estimate (optional).
smoothing_scale : None
# If True, use an F277W filter exposure to create a mask of background order 0s.
generate_order0_mask : False
# Path to a processed (superbias and background subtracted) F277W exposure data frame
# (optional). Only necessary if generate_order0_mask is True.
f277w : None
# List of Stage 2 steps to skip, if any.
stage2_skip : None
# DMS Stage 2 kwargs. Format should be: {'step_name': {'kwd': value}}.
stage2_kwargs : {}

# ===== Stage 3 Input Files & Parameters =====
# Extraction method: box or atoca.
extract_method : 'atoca'
# Box width to extract around the trace center.
soss_width : 30
# Specprofile reference file for ATOCA (optional).
specprofile : None
# File with centroids for all three orders for box extraction (optional).
centroids : None
# Stellar effective temperature in K for wavelength calibration (optional).
st_teff : None
# Stellar log surface gravity for wavelength calibration (optional)
st_logg: None
# Stellar metallicity as [Fe/H] for wavelength calibration (optional).
st_met : None
# Planet letter designation.
planet_letter : 'b'

# ===== Other General Parameters =====
# Name tag for output file directory.
output_tag : ''
# Pipeline stages to run.
run_stages : [1, 2, 3]
# Type of exposure; either CLEAR or F277W.
exposure_type : 'CLEAR'
# Save results of each intermediate step to file.
save_results : True
# Force redo of steps which have already been completed.
force_redo : False
# Integrations of ingress and egress.
baseline_ints : [50, -50]
# If True, make diagnostic plots.
do_plots : False
# ========================= END DMS CONFIG FILE =============================